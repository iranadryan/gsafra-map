(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerpolicy&&(t.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?t.credentials="include":o.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(o){if(o.ep)return;o.ep=!0;const t=r(o);fetch(o.href,t)}})();function P(n){return n.split(" ").map(e=>e.split(",")).map(e=>({lat:Number(e[1]),lng:Number(e[0])}))}function F(n){const e=new google.maps.LatLngBounds;return n.forEach(r=>{e.extend(r)}),{center:e.getCenter(),bounds:e}}async function O(n,e,r){const{results:i}=await n.geocode({address:`${e}, ${r}`});return i[0].geometry.location}function N(n,e){const r={height:256,width:256},i=21;function o(f){const u=Math.sin(f*Math.PI/180),h=Math.log(1+u)/(1-u)/2;return Math.max(Math.min(h,Math.PI),-Math.PI)/2}function t(f,u,h){return Math.floor(Math.log(f/u/h)/Math.LN2)}const s=n.getNorthEast(),c=n.getSouthWest(),g=(o(s.lat())-o(c.lat()))/Math.PI,d=s.lng()-c.lng(),C=(d<0?d+360:d)/360,L=t(e.height,r.height,g)-1,I=t(e.width,r.width,C);return Math.min(L,I,i)}const v=document.getElementById("map");let a,l,y;const p=new URLSearchParams(window.location.search),m=Number(p.get("idTalhao")),w=p.get("cidade"),M=p.get("uf"),b=[];async function A(){const n={lat:-2.9912935,lng:-47.3536209};if(a=new google.maps.Map(v,{center:n,zoom:16,mapTypeId:"satellite",disableDefaultUI:!0,zoomControl:!0}),l=new google.maps.InfoWindow,y=new google.maps.Geocoder,b.length===0){if(!w||!M)return;const e=await O(y,w,M);a.setCenter(e)}else{const e=[];b.forEach(t=>{const s=P(t.coordenadas),c=new google.maps.Polygon({map:a,paths:s,fillColor:m===t.id?"#FF9A1F":"#009056",fillOpacity:.7,strokeColor:m===t.id?"#F7BC91":"#AFF9C7",strokeWeight:3,...m===t.id&&{zIndex:999}});c.addListener("click",g=>{const d=`
          <b class="talhao-name">${t.nome}</b><br />
          <b class="talhao-label">\xC1rea: </b>
          <span class="talhao-info">${t.area} ha</span><br />
        `;l.setContent(d),l.setOptions,l.setPosition(g.latLng),l.open(a)}),c.addListener("mouseout",()=>{l.close()}),e.push(...s)});const{bounds:r,center:i}=F(e),o=N(r,{height:a.getDiv().clientHeight,width:a.getDiv().clientWidth});a.setCenter(i),a.setZoom(o)}}window.initMap=A;
